---
- name: Realizacion del reto1
  hosts: all
  become: yes
  gather_facts: false
  
  tasks:
    - name: Obtener el hostname
      ansible_hostname:
      register: hostname

    - name: Imprimir el hostname en pantalla
      debug:
        var: hostname.ansible_facts.ansible_hostname
  
  
  
  
  
  
    - name: Gather facts from Chocolatey
      chocolatey.chocolatey.win_chocolatey_facts:

    - name: Displays the gathered facts
      ansible.builtin.debug:
        var: ansible_chocolatey
        
    - name: Displays the gathered facts
      ansible.builtin.debug:
        var: ansible_hostname
     
     
    - name: Check windows version
      ansible.windows.win_command: windows --version
      register: version
      
    - ansible.builtin.debug:
        msg:  Version is {{ version.stdout_lines[0] }} 
  
  
    - name: install iis
      win_feature:
        name: Web-Server
        state: present
    - name: start iis service
      win_service:
        name: W3Svc
        state: started
  
    - name: Enable firewall
      community.windows.win_firewall:
      state: enabled
  
    - name: Create a directory 
      win_file:
       path: /tmp/reto1
       state: directory
  
  
  
  
  
  

   # - name: Obtener el hostname de la m√°quina e imprimir 
   #   ansible.builtin.setup:
   #     filter:
   #     - 'ansible_hostname'
   #   register: setup

   # - debug:
   #     var: setup
   
   
   
  
  
